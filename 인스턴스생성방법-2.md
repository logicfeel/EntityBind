# 객체 생성 스타일

## 1. BindModel 생성후 설정
```javascript
// ** prop, mapping 없음 (아이템을 직접 설정하므로)
// 생성
var board = new BindModelAjax();
// 객체 속성 설정
board.baseUrl = "../Boad.C.asp";
// cmd 생성
board.addCommand("read");
// cmd 속성 설정
board.read.outputOption = 3;
// item 등록 [전역]
board.addItem("cmd", "", [], "bind");
// item 등록 [지역]
board.read.addItem("tel", "010..", ["vaild", "bind"]);
// 콜백 설정
board.read.onExecute = function(p_bindCommand) { bm.items["cmd"].value = "READ"; };
// 전처리
board.preRegister = function(p_this) {
    /* 내용 */
};
// 준비 완료
$(document).ready(function () {
    board.init();           // 초기화
    board.read.execute();   // 읽기
});
```


## 2. BindModel 생성시 의존성 주입 (객체)
```javascript
// 생성 및 주입
var board = new BindModelAjax({
    baseUrl: "../Boad.C.asp",       // 객체 속성 설정
    command: {
        read: {
           outputOption: 3,
           items: {
                name: "tel", 
                value: "010..",
                entity: ["vaild", "bind"]
           },
           onExecute: function(p_bindCommand) { bm.items["cmd"].value = "READ"; };
        }
    },
    prop: { 
        __pageSize: 10, // 내부용
        keyword: "",
        sort_cd: "",
    },
    mapping: {
        keyword: { Array: "bind" }
        sord_cd: { list: ["valid", "bind"] }
    },    
    preRegister: function(p_this) { // 전처리
        /* 내용 */
    },
});
// 준비 완료
$(document).ready(function () {
    board.init();           // 초기화
    board.read.execute();   // 읽기
});
```

## 3. setService(svc) 의존성 주입 방식
```javascript
// 생성
var board = new BindModelAjax();
// 서비스 설정
board.setService(new BoardEventService(board));
// 준비 완료
$(document).ready(function () {
    board.init();           // 초기화
    board.read.execute();   // 읽기
});
```

## 3-1. XxxService(p_suffix) 서비스
```javascript
// 서비스 클래스
var BoardService = (function (_super) {
    function BoardServie(p_suffix) {
        _super.call(this);

        var _this = this;
        var SUFF = p_suffix || "";
        
        this.baseUrl = "../board.C.asp";

        var template = null;    // 템플릿 변수

        this.command: {
            list: {
                outputOption: 1,
                onExecute: function(p_bindCommand) {
                    _this.items["cmd"].value = "LIST";
                },
                cbOutput: function(p_entity) {
                    var row_total = p_etity["row_total"];

                    if (template === null) {    // 첫 실행만 로딩
                        template = Handlebars.compile( _this.items["_temp_list"].value );
                        Handlebars.registerHelper('date_cut', function(p_date) {
                            return p_date.substring(0, 10);
                        });
                    }
                    _this.items['_txt_totalView'].value = row_total;
                    _this.items['_area_list'].value = tempalte(p_entity);
                    _this.items['_area_page'].value = page.parser(row_total);;
                },
                cbEnd: function(p_entity) {
                    if (p_entity["return"] < 0) return alert("목록조회 실패 ");
                },
            },
            read: {
                outputOption: 3,
                onExecute: function(p_bindCommand) {
                    _this.items["cmd"].value = "READ";
                },
                cbEnd: function(p_entity) {
                    if (p_entity["return"] < 0) return alert("조회 실패 ");
                },
            }
        };

        this.prop = {
            // inner 
            __isGet:    true,
            __frmUrl:   '',
            // view
            _temp_list: { selector: { key: '#s-temp-list'+ SUFF,    type: 'html' } },
            _area_list: { selector: { key: '#s-area-list'+ SUFF,    type: 'html' } },
            // mapping
            cmd:        '',
            keyword:    { selector: { key: '#m-keyword'+ SUFF,      type: 'value' } },
            page_size:  {
                setter:     function() { return page.page_size },
                getter:     function(val) { page.page_size = val }
            },
            page_count: {
                setter:     function() { return page.page_count },
                getter:     function(val) { page.page_count = val }
            },
            sort_cd:    '',
            ntc_idx:    '',
            title:      { selector: { key: '#m-title'+ SUFF,        type: 'text' } },
            writer:     { selector: { key: '#m-writer'+ SUFF,       type: 'text' } },
            contents:   { selector: { key: '#m-contents'+ SUFF,     type: 'text' } },
            create_dt:  { selector: { key: '#m-create_dt'+ SUFF,    type: 'text' } },
        };

        this.mapping = {
            cmd:        { Array:    'bind' },
            keyword:    { list:     'bind' },
            page_size:  { list:     'bind' },
            page_count: { list:     'bind' },
            sort_cd:    { list:     'bind' },
            ntc_idx:    { read:     'bind' },
            title:      { read:     'output' },
            writer:     { read:     'output' },
            contents:   { read:     'output' },
            create_dt:  { read:     'output' },
        };
    }
    util.inherits(BoardServie, _super);

    BoardService.prototype.preRegister = function(p_this) {
        BaseServie.prototype.preRegister.call(this);
        // 초기값 설정
        p_this.items['keyword'].value = ...;
        page.page_count = ...;
        // 바인딩 방식 설정
        if (p_this.prop['__isGet'] === true) { page.callback = page.goPage.bind(p_this.list.bind) }
        else { page.callback = p_this.list.execute.bind(p_this.list); }
        // 이벤트 등록
        $( p_this.prop['_btn_serch'].selector.key ).click(function() {
            page.page_count = 1;
            p_this.list.execute();
        });
    };

    return BoardServie;
}(BaseService));

```