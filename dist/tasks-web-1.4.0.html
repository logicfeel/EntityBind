<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset="utf-8" />    
</head>
<body>
    <p class="msg">msg : </p>

    테스트함
<!--
   <script src="auto-meta-1.1.0.js"></script>
-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.js?aaa"></script>
<script src="auto-meta-1.4.0.js?a"></script>
<script src="auto-meta-1.4.0.task.js?a"></script>

<script>

    var BindModelReadAjax       = _W.Meta.Bind.BindModelReadAjax;
    var IBindModelRead          = _W.Interface.IBindModelRead;
    var util                    = _W.Common.Util;

    function ReadDI() {
        IBindModelRead.call(this);

        var __this = this;          // 내부용 this : prototype 접근지시자

        this.cbRegister = function() {
            console.log("cbREgister.#btn_List 이벤트 등록..");
            this.read.cbOutput = __this.readView;
            this.read.cbValid = __this.readValid;
        };

        this.cbValid = function() {   // 2.검사
            if (this.attr.cmd === "") Msg("에러! 잘못된 접근경로입니다.");
            return true;
        };

        this.cbReady = function(model) {
            this.read.execute();
        };

        this.cbFail = function(p_msg, p_code) {
            console.log("실패 :: Code= \"%s\", Message= %s ", p_code, p_msg);
        };

        this.cbError = function(p_msg, p_status) {
            console.log("오류 :: Status= \"%s\" , Message= %s ", p_status, p_msg);
        };

        this.onExecute = function() {       // 실행시 이벤트 등록
            console.log("onExecute 이벤트. ");
        };
        this.onExecuted = function() {      // 실행끝 이벤트 등록
            console.log("onExecuted 이벤트.. ");
        };
    }
    util.inherits(ReadDI, IBindModelRead);

    ReadDI.prototype.readValid = function() {
        // console.log("경고창:등록하시겠습니까 ?  => Yes ");
        // return true;

        // return confirm("경고창:등록하시겠습니까 ?");
    };
    // xhr.send( options.hasContent && options.data || null );
    // this.ReadDI = ReadDI;
</script>

<script>

    var BindModelReadAjax       = _W.Meta.Bind.BindModelReadAjax;
    var util                    = _W.Common.Util;

    function ReadDIView() {
        ReadDI.call(this);

        var __this = this;          // 내부용 this : prototype 접근지시자

        this.attr = {
            cmd: "INSERT",
            idx: 130,
            listURL: "Notice_Lst.asp",
            sto_id: {
                caption: "상점코드", 
                value: "1220",
                constraints: [
                    { regex: /\D/, msg: "숫자만 입력해야함...", code: 100, return: false },
                    { regex: /[0-9]{5}/, msg: "5자리 미만 숫자만...", code: 200, return: true }
                ]
            }, 
            ntc_idx: {caption: "일련번호", value: 12},
            title: {caption: "제목", value: "제목이요"},
            writer: {caption: "작성자", value: "작가"},
            noticeType: {caption: "공지타입", value: "G"}
        };
    }
    util.inherits(ReadDIView, ReadDI);
    ReadDIView.prototype.readView = function(entity) {
        console.log("-------------------------------------------------------");
        console.log("cbOutput  호출");
        console.log("this._model.first.items.count  10 ==> " + this._model.first.items.count);   
        console.log("entity.items.count             10 ==> " + entity.items.count);   
        console.log("entity.rows.count              1  ==> " + entity.rows.count);   
        console.log("entity.rows[0]                 ,, ==> " + entity.rows[0]._element);       
    };

    //-----------------------------------------------------
    // 연결
    var e = new BindModelReadAjax(new ReadDIView(), true);

    // 등록
    e.baseUrl = "http://rtwgs4.cafe24.com/sample_row_single.asp";    // 로컬로딩
    // e.baseUrl = "./sample_row_single.json";     // 로컬 로딩
    // e.baseUrl = "http://rtwgs4.cafe24.com/sample_row_single.as";    // 오류 1
    // e.baseUrl = "sample_row_single.jsona";                      // 오류 2

    e.read.setItem(["title", "sto_id"], "valid");
    //------------------------------
    e.init();
    console.log("-End-");

</script>
</body>
</html>